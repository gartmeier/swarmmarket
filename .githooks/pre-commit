#!/bin/sh

# Check if any .ts/.tsx files are staged
STAGED_TS=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx)$')

if [ -n "$STAGED_TS" ]; then
  echo "Running TypeScript type check..."
  cd frontend && npx tsc -b --noEmit 2>&1
  TSC_EXIT=$?
  if [ $TSC_EXIT -ne 0 ]; then
    echo ""
    echo "TypeScript type check failed. Fix errors before committing."
    exit 1
  fi
  echo "TypeScript check passed."
fi